# Discord RSS Bot 要件定義書

## 1. プロジェクト概要
### 1.1 目的
複数のニュースサイトのRSSフィードを定期的に取得し、新着記事をDiscordチャンネルに自動投稿する。X(Twitter)への投稿機能も提供し、記事の拡散を支援する。

### 1.2 対象ユーザー
- ニュース情報をDiscordで受け取りたい個人・チーム
- 定期的なニュース配信を自動化したいユーザー
- 記事をソーシャルメディアで共有したいユーザー

### 1.3 想定する利用シーン
- 技術ニュースやビジネスニュースの定期配信
- チーム向けの情報共有の自動化
- 記事のソーシャルメディア拡散

## 2. 機能要件
### 2.1 基本機能
- 複数RSSフィードの登録・管理
- 15分おきの自動実行
- Discord Webhookによる投稿
- 記事タイトルとリンクの送信
- X(Twitter)への投稿リンク（intent post）

### 2.2 詳細機能
- 新着記事の判定（重複投稿防止）
- 複数RSSフィードの対応
- エラーハンドリング（RSS取得失敗時など）
- 英語記事の日本語翻訳機能（フィード毎に設定可能）
- フィード毎の記事取得数制限（設定可能）
- 投稿間隔調整（レート制限対応）
- 手動実行オプション（--once）

### 2.3 RSSフィード対応
- 標準的なRSS 2.0フォーマットに対応
- 複数フィードの同時管理
- フィード毎の個別設定（翻訳機能の有効/無効）
- 日本語・英語記事に対応
- 任意のRSSフィードURL登録可能

## 3. 非機能要件
### 3.1 パフォーマンス要件
- 設定可能な定期実行間隔（デフォルト15分）
- RSS取得の軽量化（必要最小限の情報のみ）
- 投稿間隔調整（レート制限対応）
- フィード毎の記事取得数制限（設定可能）

### 3.2 セキュリティ要件
- Discord Webhook URLの安全な管理
- 設定情報の外部化（config.json）
- 翻訳API使用時の適切なエラーハンドリング

### 3.3 可用性要件
- シンプルな構成で保守性を重視
- エラー時の適切なログ出力
- 継続実行モードと単発実行モード
- 翻訳失敗時のフォールバック機能

### 3.4 データ管理要件
- 投稿済み記事の管理（seen_articles.json）
- ログファイルの管理（rss_bot.log）
- 設定変更の即座反映

## 4. 技術要件
### 4.1 使用技術・フレームワーク
- **Python 3.11+**
- **feedparser 6.0.10**: RSS解析
- **requests 2.31.0**: HTTP通信・翻訳API
- **内蔵time/logging**: 定期実行・ログ管理

### 4.2 インフラ・環境
- ローカル環境またはVPSでの実行
- 軽量なデプロイメント
- 依存関係の最小化

### 4.3 外部サービス連携
- **RSSフィード**: 各ニュースサイト
- **Discord Webhook API**: メッセージ投稿
- **Google Translate API**: 英語記事の翻訳
- **X(Twitter) Intent API**: 投稿リンク生成

## 5. 制約事項
### 5.1 技術的制約
- シンプルな実装を優先
- 単一ファイル構成（rss_discord_bot.py）
- 無料翻訳APIの使用（Google Translate非公式）
- フィード毎の記事数制限（5件/フィード）

### 5.2 運用上の制約
- 手動でのRSSフィード登録（config.json編集）
- 基本的なエラーハンドリングのみ
- 投稿済み記事の永続化（seen_articles.json）
- レート制限対応（1秒ディレイ）

### 5.3 予算・期間の制約
- 短期間での実装完了
- 無料のサービス・ライブラリを使用
- 最小限のメンテナンス

## 6. 想定されるリスク
### 6.1 技術的リスク
- RSSフィードの形式変更によるパース失敗
- Discord Webhook APIの制限
- 翻訳APIの利用制限・仕様変更
- 大量投稿によるDiscordサーバーの負荷

### 6.2 運用リスク
- 大量の記事による投稿過多
- RSSサイトのアクセス制限
- 翻訳品質の問題
- 記事の重複投稿

## 7. 開発・運用体制
### 7.1 開発体制
- 個人開発
- 反復的な機能追加・改善

### 7.2 運用体制
- 個人での運用・保守
- 設定変更による柔軟な運用

## 8. スケジュール
### 8.1 マイルストーン
- ✅ 基本機能実装: 完了
- ✅ 翻訳機能追加: 完了
- ✅ X投稿リンク追加: 完了
- ✅ 本格運用開始: 完了

### 8.2 リリース計画
- ✅ MVP版リリース: 完了
- 継続的な改善・調整

## 9. 成功基準
### 9.1 定量的指標
- 設定した間隔での正常実行
- RSS取得成功率 > 90%
- 翻訳成功率 > 80%（翻訳機能使用時）
- 投稿間隔の維持（レート制限対応）

### 9.2 定性的指標
- シンプルで保守しやすいコード
- 安定した動作
- 適切なエラーハンドリング
- ユーザビリティの高いDiscord投稿

## 10. 投稿メッセージ仕様
### 10.1 標準投稿フォーマット
```
**[フィード名]**
📰 [記事タイトル]
🔗 [記事URL]
🐦 [Xに投稿](https://x.com/intent/post?text=...)
```

### 10.2 翻訳対応投稿（翻訳機能有効時）
```
**[フィード名]**
📰 [日本語翻訳されたタイトル]
🔗 [記事URL]
🐦 [Xに投稿](https://x.com/intent/post?text=...)
```

## 11. 参考資料
### 11.1 関連文書
- Discord Webhook API仕様
- Python feedparserライブラリドキュメント
- Google Translate API（非公式）
- X(Twitter) Intent API仕様

### 11.2 外部資料
- 対象ニュースサイトのRSSフィード仕様
- 各サイトの利用規約・アクセス制限

## 12. 設定ファイル仕様
### 12.1 config.json構造
```json
{
    "discord_webhook_url": "Discord WebhookのURL",
    "rss_feeds": [
        {
            "name": "表示名",
            "url": "RSSフィードURL",
            "translate": true/false（翻訳機能の有効/無効、オプション）
        }
    ],
    "check_interval_minutes": "チェック間隔（分）",
    "max_articles_per_feed": "フィード毎の最大記事取得数"
}
```

### 12.2 データファイル
- **seen_articles.json**: 投稿済み記事ID管理
- **rss_bot.log**: 実行ログ
- **requirements.txt**: Python依存関係